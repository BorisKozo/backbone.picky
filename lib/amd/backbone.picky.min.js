// Backbone.Picky, v0.1.0
// Copyright (c)2013 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
// http://github.com/derickbailey/backbone.picky
(function(e,t){typeof define=="function"&&define.amd&&define(["_","Backbone"],t)})(this,function(e,t){return t.Picky=function(e,t){var n={};n.SingleSelect=function(){},n.SingleSelect.mixInto=function(e){var r=new n.SingleSelect;t.extend(e,r),i(e)},t.extend(n.SingleSelect.prototype,{select:function(e){if(e&&this.selected===e)return;if(!this.some(function(t){return t===e}))return;this.deselect(),this.selected=e,this.selected.select(),this.trigger("selected",e)},deselect:function(e){if(!this.selected)return;e=e||this.selected;if(this.selected!==e)return;this.selected.deselect(),this.trigger("deselected",this.selected),delete this.selected}}),n.MultiSelect=function(){},n.MultiSelect.mixInto=function(e,r){var i=new n.MultiSelect;i.multiSelectOptions=r,i.selected={},t.extend(e,i),s(e)},t.extend(n.MultiSelect.prototype,{select:function(e){if(this.selected[e.cid])return;if(!this.some(function(t){return t===e}))return;this.selected[e.cid]=e,e.select(),r(this)},deselect:function(e){if(!this.selected[e.cid])return;delete this.selected[e.cid],e.deselect(),r(this)},selectAll:function(){this.each(function(e){e.select()}),r(this)},deselectAll:function(){if(this.selectedLength===0)return;this.each(function(e){e.deselect()}),r(this)},toggleSelectAll:function(){this.selectedLength===this.length?this.deselectAll():this.selectAll()}}),n.Selectable=function(){},n.Selectable.mixInto=function(e){var r=new n.Selectable;t.extend(e,r)},t.extend(n.Selectable.prototype,{select:function(){if(this.selected)return;this.selected=!0,this.trigger("selected"),this.collection&&this.collection.select(this)},deselect:function(){if(!this.selected)return;this.selected=!1,this.trigger("deselected"),this.collection&&this.collection.deselect(this)},toggleSelected:function(){this.selected?this.deselect():this.select()},changeSelected:function(e){e?this.select():this.deselect()}});var r=function(e){e.selectedLength=t.size(e.selected);var n=e.selectedLength,r=e.length;if(n===r){e.trigger("selected:all",e);return}if(n===0){e.trigger("selected:none",e);return}if(n>0&&n<r){e.trigger("selected:some",e);return}},i=function(e){e.each(function(t){if(t.selected){e.selected=t;return}})},s=function(e){e.each(function(t){t.selected&&(e.selected[t.cid]=t)}),r(e)};return n}(t,e),t.Picky});